\documentclass[14pt,aspectratio=169,xcolor={usenames,dvipsnames}]{beamer}
\usetheme{Frankfurt}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[australian]{babel}
%\usepackage{amsfonts}
%\usepackage{csquotes}
\usepackage{tikz}
%\usepackage{multirow}
\usepackage{pgfplots}
%\usepackage{booktabs}
\usepackage{siunitx}
%\usepackage{algorithm2e}
\usepackage[super]{nth}
%\usepackage[hidelinks]{hyperref}

\pgfplotsset{compat=1.5}



\author{Sébastien Vaucher \and Benjamin Bediako}
\title{Tree-based Routing}
%\setbeamercovered{transparent} 
%\setbeamertemplate{navigation symbols}{} 
%\logo{}
%\institute{Université de Neuchâtel}
\date{14 December 2015}
\subject{Sensor Network \& Internet of Things}
\begin{document}

\begin{frame}[plain]
\titlepage
\begin{center}
Sensor Networks \& Internet of Things\\
University of Bern
\end{center}
\end{frame}

\begin{frame}{Contents}
\tableofcontents
\end{frame}



\section{The algorithm}

\subsection{Theoretical introduction}

\begin{frame}{Goal of the algorithm}

\begin{enumerate}
\item Establish a tree of nodes
\begin{itemize}
\item The \textbf{sink} is the root of the tree
\end{itemize}
\item Route sensor data towards the sink
\end{enumerate}
\end{frame}


\begin{frame}{Two phases}
\begin{enumerate}
\item Discovery phase
\begin{enumerate}
\item Regularly \textit{flood} discovery packets from the sink
\item Re-broadcast the packet at intermediate nodes
\item $\rightarrow$ Only if interesting packet
\item Choose parent according to strategy
\end{enumerate}
\item Send temperature data hop-by-hop
\begin{enumerate}
\item Each node sends to its parent
\item Recursively forward until sink is reached
\end{enumerate}
\end{enumerate}
\end{frame}

\subsection{Implementation}

\begin{frame}{Algorithm configuration}
\begin{enumerate}
\item 2 MAC protocols
\begin{itemize}
\item NullMAC
\item X-MAC
\end{itemize}
\item 2 parent choice strategies
\begin{itemize}
\item Lowest hop-count
\item Highest RSSI (best signal quality)
\end{itemize}
\end{enumerate}
\end{frame}


\section{Analysis}

\subsection{Methodology}

\begin{frame}{Producing data}
To produce data to analyze, we added some \textsf{printf}
\vspace{1cm}
\begin{block}{Sink}
Every \SI{30}{\second}, print the hop-count distribution of incoming packets
\end{block}
\begin{block}{Sensor nodes}
When setting a new parent, output its ID
\end{block}
\end{frame}


\begin{frame}{Parsing the generated data}
Custom Python script with embedded XML parser.\\
It generates:

\begin{enumerate}
\item All numerical statistics
\item A 3D representation of the links between nodes
\end{enumerate}
\end{frame}

\subsection{Results}

\begin{frame}
\begin{columns}
\column{0.6\textwidth}
\begin{figure}
\input{map.tex}
\end{figure}
\column{0.4\textwidth}
\begin{itemize}
\item Ti\textit{k}Z picture generated by the Python script
\item MAC = X-MAC
\end{itemize}
\vspace{2.5cm}
\begin{block}{Legend}
\colorbox{Maroon}{\color{white}hop-count} \colorbox{JungleGreen}{RSSI}
\end{block}
\end{columns}
\end{frame}



\begin{frame}{Hop-counts distribution}
\begin{tikzpicture}[scale=1]
\begin{axis}[
	grid=major,
	height=6.5cm,
	width=0.83\textwidth,
	ylabel={Proportion of messages (\%)},
	xlabel={Hop-count},
	legend style={at={(0.7,1)}, anchor=north west,legend columns=1},
]
\addplot coordinates {(0, 2.857142857142857) (1, 41.05263157894737) (2, 28.421052631578947) (3, 26.766917293233083) (4, 0.9022556390977444) (5,0)};
\addplot coordinates {(0, 2.9275808936825885) (1, 41.756548536209553) (2, 31.124807395993837) (3, 23.420647149460708) (4, 0.7704160246533128) (5,0)};
\addplot coordinates {(0, 3.725490196078431) (1, 45.294117647058824) (2, 29.01960784313726) (3, 17.647058823529413) (4, 3.92156862745098) (5, 0.392156862745098)};
\addplot coordinates {(0, 3.6053130929791274) (1, 43.64326375711575) (2, 27.703984819734345) (3, 21.821631878557876) (4, 3.225806451612903) (5,0)};

\legend{NullMAC hop-count, NullMAC RSSI, X-MAC hop-count, X-MAC RSSI}
\end{axis}
\end{tikzpicture}
\end{frame}



\begin{frame}{Metrics}
\begin{columns}

\column{0.5\textwidth}
\textbf{Average hop-count}
\vspace{5mm}
\begin{tabular}{c|c|c|}
& Hop-count & RSSI \\
\hline
X-MAC & 2.72 & 2.61 \\
NullMAC & 2.77 & 2.73 \\
\end{tabular}

\column{0.5\textwidth}
\textbf{Average physical link length}
\vspace{5mm}
\begin{tabular}{c|c|c|}
& Hop-count & RSSI \\
\hline
X-MAC & 49.52 & 46.06 \\
\end{tabular}

\textbf{Percentage of connected nodes}
\begin{tabular}{c|c|c|}
& Hop-count & RSSI \\
\hline
X-MAC & \SI{72.5}{\percent} & \SI{67.5}{\percent} \\
\end{tabular}

\end{columns}
\end{frame}


\begin{frame}{Packet delivery rate}
\begin{tikzpicture}[scale=1.0]
\begin{axis}[
	ybar,
	legend style={at={(1.02,1)}, anchor=north west,legend columns=1},
	legend cell align=left,
	symbolic x coords={Global,Connected},
	ylabel={Successful deliveries (\%)},
	enlarge x limits=0.6,
	enlarge y limits=0.4,
	nodes near coords,
	xtick=data,
	bar width={16},
	every node near coord/.append style={rotate=90, anchor=west}
]

\addplot coordinates { (Global,66.3) (Connected,89.1) };
\addplot coordinates { (Global,68.6) (Connected,99.0) };
\addplot coordinates { (Global,87.2) };
\addplot coordinates { (Global,85.0) };

\legend{X-MAC hop-count, X-MAC RSSI, NullMAC hop-count, NullMAC RSSI}
\end{axis}
\end{tikzpicture}
\end{frame}

\section{Conclusion}

\begin{frame}{Encountered problems}
\begin{enumerate}
\item On TARWIS using NullMAC, \textsf{printf} does not always arrive
\begin{itemize}
\item Impossible to parse child relations
\item Some statistics missing
\end{itemize}
\item Less than $\frac{3}{4}$ of the nodes managed to connect
\end{enumerate}
\end{frame}

\begin{frame}{Conclusion}
\begin{itemize}
\item Our implementation works
\item NullMAC (seems to) perform better
\item The RSSI strategy is the best
\item[]
\item Possible improvements
\begin{itemize}
\item Return channel
\item Implies sending ACKs to parent
\end{itemize}
\end{itemize}
\end{frame}

\end{document}